# sudo 环境变量访问

mac操作系统下在运行 `sudo` 命令的时候，有可能会出现部分环境变量找不到的问题，原因是在执行 `sudo` 的时候，会重置环境变量。用户自己定义的一些环境变量会因此丢失，比如我在 `~/.bashrc` 文件添加的 `N_NODE_MIRROR` 变量就丢失了



解决方法可以在执行 `sudo`  的时候添加 `-E` 参数，用来保留当前设置的环境变量。在 `sudo --help` 中可以看到这个选项的解释



执行 `sudo -l` 可以发现 `env_reset` 和 `env_keep` 两个关键字，分别是重置，这也就是为什么环境变量为什么会丢失的原因了吧。修改 `/etc/sudoers` 文件，参照原有格式将希望保留下来的环境变量通过 `env_keep` 的方式保留下来就可以了



