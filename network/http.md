# http

http协议主要的版本有3个，分别是HTTP/1.0、HTTP/1.1和HTTP/2

### HTTP/0.9
1991年的原型版本，这个版本有严重设计缺陷，只支持GET方法，不支持多媒体内容的MIME类型，各种HTTP首部，或者版本号。这个版本定义的初衷就是为了获取简单的HTML对象

### HTTP/1.0

1996年发布HTTP/1.0版本，为了提高系统的效率，HTTP/1.0规定浏览器与服务器只保持短暂的连接，浏览器的每次请求都需要与服务器建立一个TCP连接，
服务器完成请求处理后立即断开TCP连接，服务器不跟踪每个客户也不记录过去的请求。

1. 请求可以由多行首部字段构成
2. 响应对象前面添加了一个响应状态行
3. 响应对象也有自己的由换行符分隔的首部字段
4. 响应对象不局限于超文本
5. 服务器与客户端之间的连接在每次请求之后都会关闭

每次连接都需要经过TCP的三次握手，很耗时间，所以HTTP/1.0版本性能比较差

### HTTP/1.1
1999年诞生HTTP/1.1。最主要的改进就是引入持久连接。所谓的持久连接就是TCP连接默认不关闭，可以被多个请求复用。

客户端和服务器发现对方一段时间没有活动，就可以主动关闭连接。或者客户端在最后一个请求时，主动告诉服务器要关闭连接

HTTP/1.1版本还引用了管道机制（pipelining）,即在同一个TCP连接里，客户端可以同时发送多个请求。这样就进一步改进HTTP协议的效率。

持久连接的情况下，消息传递类似于

`请求1` -> `响应1` -> `请求2` -> `响应2`

管道机制下，消息传递类似于

`请求1` -> `请求2` -> `请求3` -> `响应1` -> `响应2` -> `响应3`

1. 持久连接的缺点是后续请求只能在前面的请求响应之后才能发送出去。而管道机制不必要等前面的响应直接发送后续的请求
2. 只有GET和HEAD请求可以进行管线化，而POST请求则有所限制
3. 初次创建连接时不应该启动管线机制，因为服务器不一定支持HTTP/1.1版本的协议
4. 很多服务器对管道机制支持并不好，现代浏览器chrome和firefox并未开启管线化

重要的性能优化: 持久连接，分块编码传输，字节范围请求，增强的缓存机制，传输编码及请求管道

### HTTP/2
HTTP/2是HTTP协议自1999年HTTP/1.1发布后的首个更新，主要基于SPDY协议。

HTTP/2采用了多路复用
